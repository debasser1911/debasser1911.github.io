(this["webpackJsonpatlana-github-app"]=this["webpackJsonpatlana-github-app"]||[]).push([[0],{63:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),s=r(32),a=r.n(s),o=r(11),i=r(2),l=r(9),j=r.n(l),u=r(12),b=r(4),d=r(0),h=function(e){var t=e.error;return Object(d.jsxs)("h1",{className:"text-center text-3xl",children:["Houston, we have a ploblem!",Object(d.jsx)("br",{}),t.status," ",t.data.message]})},O=r(13),x=r(19),f=r.n(x),v=function(e){var t=e.repo,r=void 0===t?{}:t;return Object(d.jsxs)("tr",{className:"repo-row border-2 border-gray-200",children:[Object(d.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(d.jsx)("a",{href:r.html_url,target:"_blank",rel:"noreferrer",children:r.name})}),Object(d.jsxs)("td",{className:"repo-row_repo-info p-3",children:[Object(d.jsx)("strong",{children:"Stars \u2b50 :"})," ",Object(d.jsx)("i",{children:r.stargazers_count}),Object(d.jsx)("br",{}),Object(d.jsx)("strong",{children:"Forks \u292e :"})," ",Object(d.jsx)("i",{children:r.forks_count})]})]})},p=function(e){var t=e.setSearchString,r=e.searchString,c=void 0===r?"":r,n=e.placeholder,s=void 0===n?"":n;return Object(d.jsx)("div",{className:"user-search-bar flex justify-center p-5",children:Object(d.jsx)("input",{className:"border-2 border-gray-500 w-2/6  p-1",placeholder:s,type:"text",value:c,onChange:function(e){return t(e.target.value)},max:100})})},g=function(e){var t=e.user,r=void 0===t?null:t,n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)([]),l=Object(b.a)(i,2),h=l[0],x=l[1],g=Object(c.useState)(""),m=Object(b.a)(g,2),N=m[0],w=m[1],S=Object(c.useState)(1),y=Object(b.a)(S,2),k=y[0],_=y[1],E=Object(c.useRef)(null),L=function(){var e=Object(u.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(r.repos_url,"?page=").concat(t));case 2:(c=e.sent).data&&o((function(e){return[].concat(Object(O.a)(e),Object(O.a)(c.data))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Object.keys(r).length&&L(k)}),[r]),Object(c.useEffect)((function(){x(a)}),[a]);var I=function(e){e[0].isIntersecting&&h.length<r.public_repos&&_((function(e){return e+1}))};return Object(c.useEffect)((function(){if(E.current){new IntersectionObserver(I,{root:null,rootMargin:"50px",threshold:1}).observe(E.current)}}),[E.current]),Object(c.useEffect)((function(){k>1&&L(k)}),[k]),Object(c.useEffect)((function(){"string"===typeof N&&a&&x(a.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})))}),[N]),Object(d.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(d.jsx)(p,{searchString:N,setSearchString:w,placeholder:"Search in repositories list"}),Object(d.jsx)("div",{className:"flex justify-center auto-cols-max",children:Object(d.jsxs)("table",{className:"w-2/3 table table-auto",children:[Object(d.jsx)("thead",{className:"border-4 border-gray-500",children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Repository name"}),Object(d.jsx)("th",{children:"Info"})]})}),Object(d.jsx)("tbody",{children:null===h||void 0===h?void 0:h.map((function(e,t){return Object(d.jsx)(v,{repo:e},t)}))})]})}),(null===r||void 0===r?void 0:r.public_repos)!==(null===h||void 0===h?void 0:h.length)&&!N&&Object(d.jsx)("div",{className:"container",ref:E,children:Object(d.jsx)("h2",{children:"Loading..."})})]})},m=function(e){var t=e.user,r=void 0===t?{}:t;return Object(d.jsxs)("div",{className:"flex flex-col w-72 user-page_user-info-block",children:[Object(d.jsxs)("span",{children:["Login ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.login})]}),Object(d.jsxs)("span",{children:["Followers ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.followers})]}),Object(d.jsxs)("span",{children:["Following ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.following})]}),Object(d.jsxs)("span",{children:["E-Mail ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.email})]}),Object(d.jsxs)("span",{children:["Location ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.location})]}),Object(d.jsxs)("span",{children:["User created ",Object(d.jsx)("strong",{children:(new Date).toUTCString(null===r||void 0===r?void 0:r.created_at)})]}),Object(d.jsxs)("span",{children:["Bio ",Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.bio})]})]})},N=function(){var e=Object(i.f)();return Object(d.jsx)("header",{className:"h-20 shadow-md",children:Object(d.jsx)("div",{className:"container flex justify-center items-center h-full",children:Object(d.jsx)("h1",{className:"text-center text-2xl cursor-pointer",onClick:function(){return e.push("/")},children:"Github searcher"})})})},w=function(e){var t=e.children,r=void 0===t?{}:t;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),r]})},S=r(19).default,y=function(){return S.create({baseURL:"https://api.github.com"})},k=function(){var e=Object(c.useState)(null),t=Object(b.a)(e,2),r=t[0],n=t[1],s=Object(i.g)(),a=Object(c.useState)(null),o=Object(b.a)(a,2),l=o[0],O=o[1];return Object(c.useEffect)((function(){Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=11;break}return e.prev=1,e.next=4,y().get("/users/".concat(s.userLogin));case 4:t=e.sent,n(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),O(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[s]),Object(d.jsx)(w,{children:Object(d.jsx)("div",{className:"container flex flex-col user-page mt-20",children:r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"flex justify-evenly user-page-block",children:[Object(d.jsx)("img",{className:"h-44",src:r.avatar_url,alt:"avatar"}),Object(d.jsx)(m,{user:r})]}),Object(d.jsx)(g,{user:r})]}):l?Object(d.jsx)(h,{error:l}):Object(d.jsx)("h1",{className:"text-center text-3xl",children:"Loading..."})})})},_=r(22),E=function(e){var t=e.user,r=void 0===t?{}:t;return Object(d.jsxs)("tr",{className:"user-row border-2 border-gray-200",children:[Object(d.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(d.jsx)("img",{className:"w-28",src:null===r||void 0===r?void 0:r.avatar_url,alt:"avatar"})}),Object(d.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(d.jsx)(o.b,{to:function(e){return Object(_.a)(Object(_.a)({},e),{},{pathname:"/user/".concat(null===r||void 0===r?void 0:r.login)})},children:Object(d.jsx)("strong",{children:null===r||void 0===r?void 0:r.login})})}),Object(d.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(d.jsx)("a",{href:null===r||void 0===r?void 0:r.repos_url,target:"_blank",rel:"noreferrer",children:"User repositories page"})})]})},L=function(e){var t=e.users,r=void 0===t?[]:t,c=e.loaderRef,n=e.totalUsers;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"users-table flex flex-col items-center",children:[Object(d.jsxs)("h2",{className:"text-2xl font-bold p-3",children:["Total users found - ",n]}),Object(d.jsxs)("table",{className:"w-2/3 table-auto",children:[Object(d.jsx)("thead",{className:"border-4 border-gray-500",children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Avatar"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Repos"})]})}),Object(d.jsx)("tbody",{children:r&&0!==r.length&&r.map((function(e,t){return Object(d.jsx)(E,{user:e},t)}))})]})]}),(null===r||void 0===r?void 0:r.length)!==n&&Object(d.jsx)("div",{className:"loading",ref:c,children:Object(d.jsx)("h2",{children:"Loading..."})})]})},I=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),r=t[0],n=t[1],s=Object(c.useState)(0),a=Object(b.a)(s,2),o=a[0],i=a[1],l=Object(c.useState)(""),h=Object(b.a)(l,2),x=h[0],f=h[1],v=Object(c.useState)(1),g=Object(b.a)(v,2),m=g[0],N=g[1],S=Object(c.useRef)(null),k=Object(c.useState)(null),_=Object(b.a)(k,2),E=_[0],I=_[1],R=function(){var e=Object(u.a)(j.a.mark((function e(t,r){var c,s,a,o,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>2&&void 0!==l[2]&&l[2],e.prev=1,e.next=4,y().get("/search/users?q=".concat(t,"&page=").concat(r));case 4:(s=e.sent).data&&(i(s.data.total_count),n(c?s.data.items:function(e){return[].concat(Object(O.a)(e),Object(O.a)(s.data.items))})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),I(null===(a=e.t0.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message),console.log(E);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),F=function(e){e[0].isIntersecting&&r.length<o&&N((function(e){return e+1}))};return Object(c.useEffect)((function(){f(sessionStorage.getItem("search"))}),[]),Object(c.useEffect)((function(){if(S.current){new IntersectionObserver(F,{root:null,rootMargin:"200px",threshold:1}).observe(S.current)}}),[S.current]),Object(c.useEffect)((function(){m>1&&R(x,m)}),[m]),Object(c.useEffect)((function(){x?(N(1),R(x,1,!0)):(n([]),i(0)),null!==x&&sessionStorage.setItem("search",x)}),[x]),Object(d.jsx)(w,{children:Object(d.jsxs)("div",{className:"container user-search-page mt-20",children:[Object(d.jsx)(p,{searchString:x,setSearchString:f,placeholder:"Please enter GitHub user name/login"}),Object(d.jsx)(L,{users:r,loaderRef:S,totalUsers:o})]})})},R=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/",component:I}),Object(d.jsx)(i.a,{exact:!0,path:"/user/:userLogin",component:k})]})})},F=(r(63),function(){return Object(d.jsx)(R,{})});a.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.bd9729d6.chunk.js.map