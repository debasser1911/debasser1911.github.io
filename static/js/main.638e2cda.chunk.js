(this["webpackJsonpgithub-user-app"]=this["webpackJsonpgithub-user-app"]||[]).push([[0],{63:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),s=r(32),a=r.n(s),o=r(10),i=r(2),l=r(11),j=r(3),u=r(0),b=function(){var e=Object(c.useState)({errorMessage:"",isLoading:!1}),t=Object(j.a)(e,2),r=t[0],n=t[1],s=Object(c.useState)(!1),a=Object(j.a)(s,2),o=a[0],b=a[1];return Object(c.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var t=e.split("?code=");window.history.pushState({},null,t[0]),n(Object(l.a)(Object(l.a)({},r),{},{isLoading:!0}));var c={code:t[1]};fetch("http://localhost:5000/authenticate",{method:"POST",body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){b(!0),localStorage.setItem("loggedUser",JSON.stringify(e))})).catch((function(){n({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[]),o?Object(u.jsx)(i.a,{to:"/"}):Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"login-content flex flex-col border-4 border-gray-500 mt-10",children:[Object(u.jsx)("h1",{children:"Welcome"}),Object(u.jsx)("span",{children:r.errorMessage}),r.isLoading?Object(u.jsx)("div",{className:"loader-container",children:Object(u.jsx)("div",{className:"loader"})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("a",{className:"login-link",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat("6206939b3f9f08ca86c9","&redirect_uri=").concat("http://localhost:3000/login"),onClick:function(){n(Object(l.a)(Object(l.a)({},r),{},{errorMessage:""}))},children:"Click to login with GitHub"})})]})})},d=r(9),h=r.n(d),O=r(13),x=function(e){var t,r=e.error,c=void 0===r?{}:r;return Object(u.jsxs)("h1",{className:"text-center text-3xl",children:["Houston, we have a ploblem!",Object(u.jsx)("br",{}),c.status," ",null===(t=c.data)||void 0===t?void 0:t.message]})},f=r(14),g=r(20),p=r.n(g),v=function(e){var t=e.repo,r=void 0===t?{}:t;return Object(u.jsxs)("tr",{className:"repo-row border-2 border-gray-200",children:[Object(u.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(u.jsx)("a",{href:r.html_url,target:"_blank",rel:"noreferrer",children:r.name})}),Object(u.jsxs)("td",{className:"repo-row_repo-info p-3",children:[Object(u.jsx)("strong",{children:"Stars \u2b50 :"})," ",Object(u.jsx)("i",{children:r.stargazers_count}),Object(u.jsx)("br",{}),Object(u.jsx)("strong",{children:"Forks \u292e :"})," ",Object(u.jsx)("i",{children:r.forks_count})]})]})},m=function(e){var t=e.setSearchString,r=e.searchString,c=void 0===r?"":r,n=e.placeholder,s=void 0===n?"":n;return Object(u.jsx)("div",{className:"user-search-bar flex justify-center p-5",children:Object(u.jsx)("input",{className:"border-2 border-gray-500 w-2/6  p-1",placeholder:s,type:"text",value:c,onChange:function(e){return t(e.target.value)},max:100})})},N=function(e){var t=e.user,r=void 0===t?null:t,n=Object(c.useState)([]),s=Object(j.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)([]),l=Object(j.a)(i,2),b=l[0],d=l[1],x=Object(c.useState)(""),g=Object(j.a)(x,2),N=g[0],S=g[1],w=Object(c.useState)(1),y=Object(j.a)(w,2),k=y[0],_=y[1],L=Object(c.useRef)(null),E=function(){var e=Object(O.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(r.repos_url,"?page=").concat(t));case 2:(c=e.sent).data&&o((function(e){return[].concat(Object(f.a)(e),Object(f.a)(c.data))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Object.keys(r).length&&E(k)}),[r]),Object(c.useEffect)((function(){d(a)}),[a]);var I=function(e){e[0].isIntersecting&&b.length<r.public_repos&&_((function(e){return e+1}))};return Object(c.useEffect)((function(){if(L.current){new IntersectionObserver(I,{root:null,rootMargin:"50px",threshold:1}).observe(L.current)}}),[L.current]),Object(c.useEffect)((function(){k>1&&E(k)}),[k]),Object(c.useEffect)((function(){"string"===typeof N&&a&&d(a.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})))}),[N]),Object(u.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(u.jsx)(m,{searchString:N,setSearchString:S,placeholder:"Search in repositories list"}),Object(u.jsx)("div",{className:"flex justify-center auto-cols-max",children:Object(u.jsxs)("table",{className:"w-2/3 table table-auto",children:[Object(u.jsx)("thead",{className:"border-4 border-gray-500",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Repository name"}),Object(u.jsx)("th",{children:"Info"})]})}),Object(u.jsx)("tbody",{children:null===b||void 0===b?void 0:b.map((function(e,t){return Object(u.jsx)(v,{repo:e},t)}))})]})}),(null===r||void 0===r?void 0:r.public_repos)!==(null===b||void 0===b?void 0:b.length)&&!N&&Object(u.jsx)("div",{className:"container",ref:L,children:Object(u.jsx)("h2",{children:"Loading..."})})]})},S=function(e){var t=e.user,r=void 0===t?{}:t;return Object(u.jsxs)("div",{className:"flex flex-col w-72 user-page_user-info-block",children:[Object(u.jsxs)("span",{children:["Login ",Object(u.jsx)("strong",{children:r.login})]}),Object(u.jsxs)("span",{children:["Followers ",Object(u.jsx)("strong",{children:r.followers})]}),Object(u.jsxs)("span",{children:["Following ",Object(u.jsx)("strong",{children:r.following})]}),Object(u.jsxs)("span",{children:["E-Mail ",Object(u.jsx)("strong",{children:r.email})]}),Object(u.jsxs)("span",{children:["Location ",Object(u.jsx)("strong",{children:r.location})]}),Object(u.jsxs)("span",{children:["User created ",Object(u.jsx)("strong",{children:r.created_at&&new Date(r.created_at).toDateString()})]}),Object(u.jsxs)("span",{children:["Bio ",Object(u.jsx)("strong",{children:r.bio})]})]})},w=function(){var e=Object(i.g)();return Object(u.jsx)("header",{className:"h-20 shadow-md",children:Object(u.jsxs)("div",{className:"container flex justify-center items-center h-full",children:[Object(u.jsx)("h1",{className:"text-center text-2xl cursor-pointer",onClick:function(){return e.push("/")},children:"Github searcher"}),false]})})},y=function(e){var t=e.children,r=void 0===t?{}:t;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{}),r]})},k=r(20).default,_=function(){return k.create({baseURL:"https://api.github.com",headers:{}})},L=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),r=t[0],n=t[1],s=Object(i.h)(),a=Object(c.useState)(null),o=Object(j.a)(a,2),l=o[0],b=o[1];return Object(c.useEffect)((function(){Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=11;break}return e.prev=1,e.next=4,_().get("/users/".concat(s.userLogin));case 4:t=e.sent,n(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[s]),Object(u.jsx)(y,{children:Object(u.jsx)("div",{className:"container flex flex-col user-page mt-20",children:r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"flex justify-evenly user-page-block",children:[Object(u.jsx)("img",{className:"h-44",src:r.avatar_url,alt:"avatar"}),Object(u.jsx)(S,{user:r})]}),Object(u.jsx)(N,{user:r})]}):l?Object(u.jsx)(x,{error:l}):Object(u.jsx)("h1",{className:"text-center text-3xl",children:"Loading..."})})})},E=function(e){var t=e.user,r=void 0===t?{}:t;return Object(u.jsxs)("tr",{className:"user-row border-2 border-gray-200",children:[Object(u.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(u.jsx)("img",{className:"w-28",src:null===r||void 0===r?void 0:r.avatar_url,alt:"avatar"})}),Object(u.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(u.jsx)(o.b,{to:function(e){return Object(l.a)(Object(l.a)({},e),{},{pathname:"/user/".concat(null===r||void 0===r?void 0:r.login)})},children:Object(u.jsx)("strong",{children:null===r||void 0===r?void 0:r.login})})}),Object(u.jsx)("td",{className:" p-3 border-2 border-gray-200",children:Object(u.jsx)("a",{href:null===r||void 0===r?void 0:r.repos_url,target:"_blank",rel:"noreferrer",children:"User repositories page"})})]})},I=function(e){var t=e.users,r=void 0===t?[]:t,c=e.loaderRef,n=e.totalUsers;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"users-table flex flex-col items-center",children:[Object(u.jsxs)("h2",{className:"text-2xl font-bold p-3",children:["Total users found - ",n]}),Object(u.jsxs)("table",{className:"w-2/3 table-auto",children:[Object(u.jsx)("thead",{className:"border-4 border-gray-500",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Avatar"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Repos"})]})}),Object(u.jsx)("tbody",{children:r&&0!==r.length&&r.map((function(e,t){return Object(u.jsx)(E,{user:e},t)}))})]})]}),(null===r||void 0===r?void 0:r.length)!==n&&Object(u.jsx)("div",{className:"loading",ref:c,children:Object(u.jsx)("h2",{children:"Loading..."})})]})},M=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),r=t[0],n=t[1],s=Object(c.useState)(0),a=Object(j.a)(s,2),o=a[0],i=a[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),d=b[0],g=b[1],p=Object(c.useState)(1),v=Object(j.a)(p,2),N=v[0],S=v[1],w=Object(c.useRef)(null),k=Object(c.useState)(null),L=Object(j.a)(k,2),E=L[0],M=L[1],F=function(){var e=Object(O.a)(h.a.mark((function e(t,r){var c,s,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.length>2&&void 0!==a[2]&&a[2],e.prev=1,e.next=4,_().get("/search/users?q=".concat(t,"&page=").concat(r));case 4:(s=e.sent).data&&(i(s.data.total_count),n(c?s.data.items:function(e){return[].concat(Object(f.a)(e),Object(f.a)(s.data.items))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),M(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),R=function(e){e[0].isIntersecting&&r.length<o&&S((function(e){return e+1}))};return Object(c.useEffect)((function(){g(sessionStorage.getItem("search"))}),[]),Object(c.useEffect)((function(){if(w.current){new IntersectionObserver(R,{root:null,rootMargin:"200px",threshold:1}).observe(w.current)}}),[w.current]),Object(c.useEffect)((function(){N>1&&F(d,N)}),[N]),Object(c.useEffect)((function(){d?(S(1),F(d,1,!0)):(n([]),i(0)),null!==d&&sessionStorage.setItem("search",d)}),[d]),Object(u.jsx)(y,{children:Object(u.jsxs)("div",{className:"container user-search-page mt-20",children:[Object(u.jsx)(m,{searchString:d,setSearchString:g,placeholder:"Please enter GitHub user name/login"}),E?Object(u.jsx)(x,{error:E}):Object(u.jsx)(I,{users:r,loaderRef:w,totalUsers:o})]})})},F=function(){return Object(u.jsx)(o.a,{children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{exact:!0,path:"/",component:M}),Object(u.jsx)(i.b,{exact:!0,path:"/user/:userLogin",component:L}),Object(u.jsx)(i.b,{exact:!0,path:"/login",component:b})]})})},R=(r(63),function(){return Object(u.jsx)(F,{})});a.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.638e2cda.chunk.js.map